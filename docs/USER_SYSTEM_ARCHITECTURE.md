# ğŸ” Appwrite ç”¨æˆ·ç³»ç»Ÿæ¶æ„è¯´æ˜

## ğŸ“‹ ä¸¤ä¸ªç”¨æˆ·ç³»ç»Ÿçš„å…³ç³»

### 1ï¸âƒ£ Appwrite Auth Usersï¼ˆè®¤è¯ç³»ç»Ÿï¼‰
**ä½ç½®ï¼š** Appwrite Console â†’ Auth â†’ Usersï¼ˆä½ æˆªå›¾çœ‹åˆ°çš„ï¼‰

**ç”¨é€”ï¼š** 
- âœ… ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•/æ³¨å†Œï¼‰
- âœ… å¯†ç ç®¡ç†
- âœ… ä¼šè¯ç®¡ç†ï¼ˆSessionsï¼‰
- âœ… OAuth é›†æˆ
- âœ… é‚®ç®±éªŒè¯

**å­˜å‚¨å†…å®¹ï¼š**
- Email
- Passwordï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
- Name
- Sessionsï¼ˆç™»å½•ä¼šè¯ï¼‰
- è®¤è¯çŠ¶æ€

**APIï¼š** `account.create()`, `account.get()`, `account.createEmailPasswordSession()`

---

### 2ï¸âƒ£ Database Users Collectionï¼ˆä¸šåŠ¡æ•°æ®ï¼‰
**ä½ç½®ï¼š** Appwrite Console â†’ Databases â†’ product_consignment_db â†’ users

**ç”¨é€”ï¼š**
- âœ… å­˜å‚¨ä¸šåŠ¡ä¿¡æ¯
- âœ… æ‰©å±•ç”¨æˆ·èµ„æ–™
- âœ… å…³è”è®¢å•/åœ°å€ç­‰ä¸šåŠ¡æ•°æ®

**å­˜å‚¨å†…å®¹ï¼š**
- Phoneï¼ˆç”µè¯ï¼‰
- Roleï¼ˆè§’è‰²ï¼šuser/adminï¼‰
- Addressesï¼ˆåœ°å€åˆ—è¡¨ï¼‰
- å…¶ä»–ä¸šåŠ¡å­—æ®µ

**APIï¼š** `databases.createDocument(COLLECTIONS.USERS)`, `databases.getDocument()`

---

## ğŸ”— å®ƒä»¬å¦‚ä½•é…åˆå·¥ä½œï¼Ÿ

### æ³¨å†Œæµç¨‹ï¼ˆä»ä½ çš„ä»£ç ï¼‰

```typescript
const register = async (email: string, password: string, name: string) => {
  // æ­¥éª¤ 1ï¼šåˆ›å»º Auth Userï¼ˆè®¤è¯è´¦å·ï¼‰
  const newUser = await account.create(ID.unique(), email, password, name);
  // âœ… è¿™ä¼šåœ¨ Auth â†’ Users ä¸­æ˜¾ç¤º
  
  // æ­¥éª¤ 2ï¼šåˆ›å»º Database Userï¼ˆä¸šåŠ¡èµ„æ–™ï¼‰
  await databases.createDocument(
    DATABASE_ID,
    COLLECTIONS.USERS,    // ä½ è‡ªå»ºçš„ users é›†åˆ
    newUser.$id,          // âš ï¸ å…³é”®ï¼šä½¿ç”¨ç›¸åŒçš„ IDï¼
    {
      email: email,
      name: name,
      phone: '',
      role: 'user',
    }
  );
  // âœ… è¿™ä¼šåœ¨ Databases â†’ users ä¸­æ˜¾ç¤º
  
  // æ­¥éª¤ 3ï¼šè‡ªåŠ¨ç™»å½•
  await account.createEmailPasswordSession(email, password);
};
```

---

## ğŸ¯ å…³é”®ç‚¹ï¼šä½¿ç”¨ç›¸åŒçš„ ID

```typescript
const newUser = await account.create(ID.unique(), ...);
//                                    â†‘
//                                    ç”Ÿæˆ ID

await databases.createDocument(
  DATABASE_ID,
  COLLECTIONS.USERS,
  newUser.$id,           // â† ä½¿ç”¨ç›¸åŒçš„ ID
  { ... }
);
```

**ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**
- âœ… ä¸€å¯¹ä¸€å…³ç³»ï¼šä¸€ä¸ª Auth User å¯¹åº”ä¸€ä¸ª Database User
- âœ… æ•°æ®å…³è”ï¼šé€šè¿‡ ID å…³è”ä¸¤ä¸ªç³»ç»Ÿ
- âœ… æƒé™éš”ç¦»ï¼šè®¤è¯å’Œä¸šåŠ¡æ•°æ®åˆ†ç¦»
- âœ… å®‰å…¨æ€§ï¼šå¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ç”± Appwrite ç®¡ç†

---

## ğŸ“Š æ•°æ®æµå‘å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ·æ³¨å†Œ/ç™»å½•                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  1. Auth System       â”‚
          â”‚  (account.create)     â”‚
          â”‚                       â”‚
          â”‚  âœ… Email: test@xx.comâ”‚
          â”‚  âœ… Password: ****    â”‚
          â”‚  âœ… Name: test1       â”‚
          â”‚  ğŸ”‘ ID: 69992e...     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ ä½¿ç”¨ç›¸åŒçš„ ID
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  2. Database Users    â”‚
          â”‚  (databases.create)   â”‚
          â”‚                       â”‚
          â”‚  ğŸ”‘ ID: 69992e...     â”‚ (ç›¸åŒ)
          â”‚  ğŸ“± Phone: 138xxx     â”‚
          â”‚  ğŸ‘¤ Role: user        â”‚
          â”‚  ğŸ“ Addresses: [...]  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ä½ ç™»å½•æ—¶ç”¨çš„æ˜¯å“ªä¸ªï¼Ÿ

### ç™»å½•æµç¨‹

```typescript
const login = async (email: string, password: string) => {
  // æ­¥éª¤ 1ï¼šAuth ç³»ç»ŸéªŒè¯ï¼ˆå¯†ç éªŒè¯ï¼‰
  await account.createEmailPasswordSession(email, password);
  // âœ… åœ¨ Auth â†’ Users ä¸­éªŒè¯
  
  // æ­¥éª¤ 2ï¼šè·å– Auth User ä¿¡æ¯
  const currentUser = await account.get();
  // âœ… ä» Auth â†’ Users è·å–
  
  // æ­¥éª¤ 3ï¼šè·å–ä¸šåŠ¡èµ„æ–™
  const userDoc = await databases.getDocument(
    DATABASE_ID,
    COLLECTIONS.USERS,
    currentUser.$id
  );
  // âœ… ä» Databases â†’ users è·å–
  
  // æ­¥éª¤ 4ï¼šåˆå¹¶æ•°æ®
  const user = { ...currentUser, ...userDoc };
};
```

**ç­”æ¡ˆï¼šä¸¤ä¸ªéƒ½ç”¨ï¼**
- ğŸ” **Auth Users** - éªŒè¯å¯†ç ã€åˆ›å»ºä¼šè¯
- ğŸ“Š **Database Users** - è·å–ä¸šåŠ¡èµ„æ–™

---

## ğŸ¨ åœ¨ Appwrite Console ä¸­çš„æ˜¾ç¤º

### Auth â†’ Usersï¼ˆä½ çš„æˆªå›¾ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User ID          â”‚ Name    â”‚ Email               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 69992e760023db.. â”‚ test1   â”‚ hdinever2@gmail.com â”‚
â”‚ hdin-supervisor  â”‚ è¶…çº§ç®¡ç†å‘˜â”‚ hdinever@gmail.com  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
**ç”¨é€”ï¼š** è®¤è¯ç®¡ç†ã€ä¼šè¯ç®¡ç†

### Databases â†’ usersï¼ˆéœ€è¦ä½ å»çœ‹ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ $id              â”‚ phone   â”‚ role  â”‚ addresses  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 69992e760023db.. â”‚ 13800..â”‚ user  â”‚ [...]      â”‚
â”‚ hdin-supervisor  â”‚ 13900..â”‚ admin â”‚ [...]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
**ç”¨é€”ï¼š** ä¸šåŠ¡æ•°æ®å­˜å‚¨

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¸æŠŠæ‰€æœ‰ä¿¡æ¯éƒ½æ”¾åœ¨ Auth Usersï¼Ÿ
**A:** Auth Users åªèƒ½å­˜å‚¨å›ºå®šå­—æ®µï¼ˆemail, name, phoneï¼‰ï¼Œæ— æ³•æ‰©å±•ã€‚ä¸šåŠ¡å­—æ®µï¼ˆrole, addressesï¼‰å¿…é¡»ç”¨ Databaseã€‚

### Q2: å¦‚æœåªåˆ›å»º Auth Userï¼Œä¸åˆ›å»º Database User ä¼šæ€æ ·ï¼Ÿ
**A:** ç”¨æˆ·å¯ä»¥ç™»å½•ï¼Œä½†è·å–ä¸šåŠ¡èµ„æ–™æ—¶ä¼šæŠ¥é”™ï¼ˆæ‰¾ä¸åˆ°æ–‡æ¡£ï¼‰ã€‚

### Q3: ID ä¸ä¸€è‡´ä¼šæ€æ ·ï¼Ÿ
**A:** æ— æ³•å…³è”æ•°æ®ï¼Œå¯¼è‡´ç™»å½•åæ‰¾ä¸åˆ°ç”¨æˆ·èµ„æ–™ã€‚

### Q4: å¯ä»¥åˆ é™¤ Database Users é›†åˆå—ï¼Ÿ
**A:** âŒ ä¸å¯ä»¥ï¼ä½ çš„ä¸šåŠ¡é€»è¾‘ä¾èµ–å®ƒã€‚

---

## âœ… éªŒè¯ä¸¤ä¸ªç³»ç»Ÿ

### åœ¨ Appwrite Console ä¸­éªŒè¯

**1. æ£€æŸ¥ Auth Usersï¼š**
- Appwrite Console â†’ Auth â†’ Users
- åº”è¯¥çœ‹åˆ°ï¼štest1, è¶…çº§ç®¡ç†å‘˜

**2. æ£€æŸ¥ Database Usersï¼š**
- Appwrite Console â†’ Databases â†’ product_consignment_db â†’ users
- åº”è¯¥çœ‹åˆ°ï¼šç›¸åŒçš„ç”¨æˆ· IDï¼Œä½†æœ‰é¢å¤–å­—æ®µï¼ˆphone, roleï¼‰

**3. éªŒè¯ ID ä¸€è‡´æ€§ï¼š**
```
Auth User ID:       69992e760023db62d14f
Database User $id:  69992e760023db62d14f  â† åº”è¯¥ç›¸åŒï¼
```

---

## ğŸ¯ æ€»ç»“

| ç‰¹æ€§ | Auth Users | Database Users |
|------|------------|----------------|
| **ç”¨é€”** | è®¤è¯ç™»å½• | ä¸šåŠ¡æ•°æ® |
| **ä½ç½®** | Auth â†’ Users | Databases â†’ users |
| **å­˜å‚¨** | email, password, name | phone, role, addresses |
| **API** | `account.*` | `databases.*` |
| **å…³è”** | é€šè¿‡ç›¸åŒçš„ ID | é€šè¿‡ç›¸åŒçš„ ID |
| **å†²çªï¼Ÿ** | âŒ ä¸å†²çª | âŒ ä¸å†²çª |
| **å¿…é¡»ï¼Ÿ** | âœ… å¿…é¡» | âœ… å¿…é¡» |

**ç»“è®ºï¼š** 
- âœ… ä¸¤ä¸ªç³»ç»Ÿé…åˆä½¿ç”¨ï¼Œä¸å†²çª
- âœ… ç™»å½•æ—¶ä¸¤ä¸ªéƒ½ç”¨ï¼ˆAuth éªŒè¯å¯†ç ï¼ŒDatabase è·å–èµ„æ–™ï¼‰
- âœ… è¿™æ˜¯ Appwrite çš„æ ‡å‡†è®¾è®¡æ¨¡å¼
- âœ… å¾ˆå¤š Appwrite é¡¹ç›®éƒ½è¿™æ ·ç”¨

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Appwrite Auth Docs](https://appwrite.io/docs/products/auth)
- [Appwrite Database Docs](https://appwrite.io/docs/products/databases)
- [User Management Best Practices](https://appwrite.io/docs/products/auth/users)
